import { useEffect, useState } from "react";


const DarkTheme = () => {
    const [theme, setTheme] = useState(localStorage.getItem('theme') ? localStorage.getItem('theme') : 'light')

    const [themeIcon, setThemeIcon] = useState(false);

    const darkIcon = `<svg class='m-auto mt-[5px]' xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 18 18" fill="none">
<g clip-path="url(#clip0_1_2463)">
  <path d="M7.02518 0.907571C7.12748 1.03187 7.19015 1.184 7.2051 1.34429C7.22004 1.50458 7.18657 1.66567 7.10902 1.80674C6.50314 2.91914 6.18673 4.16605 6.1889 5.43275C6.1889 9.64668 9.62417 13.0589 13.858 13.0589C14.4103 13.0589 14.9479 13.0013 15.4646 12.8912C15.6229 12.8569 15.7879 12.87 15.9389 12.9289C16.0898 12.9878 16.2201 13.0899 16.3134 13.2224C16.4119 13.3601 16.4621 13.5266 16.4563 13.6958C16.4504 13.8651 16.3888 14.0276 16.2809 14.1582C15.459 15.1679 14.4221 15.9814 13.2458 16.5394C12.0696 17.0975 10.7836 17.386 9.48165 17.3839C4.65046 17.3839 0.737305 13.4917 0.737305 8.69616C0.737305 5.08691 2.95273 1.99118 6.10715 0.679112C6.26429 0.612703 6.43872 0.599073 6.60426 0.640269C6.7698 0.681465 6.9175 0.775262 7.02518 0.907571ZM5.82839 1.99013C4.61546 2.64075 3.60147 3.60784 2.89418 4.78862C2.1869 5.9694 1.81274 7.31975 1.81148 8.69616C1.81148 12.909 5.24781 16.3213 9.48165 16.3213C10.4955 16.323 11.4997 16.1237 12.436 15.7348C13.3723 15.3458 14.2221 14.7751 14.9364 14.0555C14.5832 14.0995 14.2238 14.1215 13.858 14.1215C9.02683 14.1215 5.11472 10.2294 5.11472 5.4338C5.11472 4.2108 5.36833 3.0465 5.82839 1.99013Z" fill="white"/>
  <path d="M12.0492 3.91539C12.0643 3.87001 12.0932 3.83051 12.132 3.80252C12.1707 3.77453 12.2173 3.75947 12.2651 3.75947C12.3129 3.75947 12.3595 3.77453 12.3983 3.80252C12.437 3.83051 12.466 3.87001 12.481 3.91539L12.8866 5.13314C13.0679 5.676 13.4934 6.10148 14.0362 6.28278L15.254 6.68835C15.2993 6.70337 15.3388 6.73232 15.3668 6.77108C15.3948 6.80983 15.4099 6.85642 15.4099 6.90423C15.4099 6.95204 15.3948 6.99863 15.3668 7.03738C15.3388 7.07614 15.2993 7.10509 15.254 7.12011L14.0362 7.52568C13.7685 7.61488 13.5252 7.76521 13.3257 7.96476C13.1261 8.1643 12.9758 8.40758 12.8866 8.67532L12.481 9.89307C12.466 9.93845 12.437 9.97794 12.3983 10.0059C12.3595 10.0339 12.3129 10.049 12.2651 10.049C12.2173 10.049 12.1707 10.0339 12.132 10.0059C12.0932 9.97794 12.0643 9.93845 12.0492 9.89307L11.6437 8.67532C11.5545 8.40758 11.4041 8.1643 11.2046 7.96476C11.0051 7.76521 10.7618 7.61488 10.494 7.52568L9.27629 7.12011C9.2309 7.10509 9.19141 7.07614 9.16342 7.03738C9.13543 6.99863 9.12036 6.95204 9.12036 6.90423C9.12036 6.85642 9.13543 6.80983 9.16342 6.77108C9.19141 6.73232 9.2309 6.70337 9.27629 6.68835L10.494 6.28278C10.7618 6.19358 11.0051 6.04325 11.2046 5.8437C11.4041 5.64416 11.5545 5.40088 11.6437 5.13314L12.0492 3.91539ZM15.2655 0.720101C15.2758 0.690261 15.2952 0.664386 15.321 0.646073C15.3467 0.62776 15.3775 0.61792 15.4091 0.61792C15.4406 0.61792 15.4714 0.62776 15.4972 0.646073C15.5229 0.664386 15.5423 0.690261 15.5526 0.720101L15.823 1.53124C15.9435 1.89384 16.2275 2.17784 16.5901 2.29836L17.4013 2.56874C17.4311 2.57908 17.457 2.59847 17.4753 2.6242C17.4936 2.64993 17.5035 2.68073 17.5035 2.71231C17.5035 2.74389 17.4936 2.77469 17.4753 2.80042C17.457 2.82615 17.4311 2.84554 17.4013 2.85588L16.5901 3.12626C16.4114 3.18571 16.2491 3.28599 16.1159 3.41915C15.9827 3.55232 15.8825 3.71469 15.823 3.89338L15.5526 4.70452C15.5423 4.73436 15.5229 4.76023 15.4972 4.77855C15.4714 4.79686 15.4406 4.8067 15.4091 4.8067C15.3775 4.8067 15.3467 4.79686 15.321 4.77855C15.2952 4.76023 15.2758 4.73436 15.2655 4.70452L14.9951 3.89338C14.9357 3.71469 14.8354 3.55232 14.7022 3.41915C14.5691 3.28599 14.4067 3.18571 14.228 3.12626L13.4169 2.85588C13.387 2.84554 13.3611 2.82615 13.3428 2.80042C13.3245 2.77469 13.3147 2.74389 13.3147 2.71231C13.3147 2.68073 13.3245 2.64993 13.3428 2.6242C13.3611 2.59847 13.387 2.57908 13.4169 2.56874L14.228 2.29836C14.5906 2.17784 14.8746 1.89384 14.9951 1.53124L15.2655 0.721149V0.720101Z" fill="white"/>
</g>
<defs>
  <clipPath id="clip0_1_2463">
    <rect width="16.7677" height="16.7677" fill="white" transform="translate(0.737305 0.616211)"/>
  </clipPath>
</defs>
</svg>`

    const lightIcon = `<svg class='mx-auto mt-[5px]' xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
<path d="M6.0469 6.82281C4.64772 8.62114 4.67221 11.8158 6.46046 13.3994C8.49079 15.1963 11.3482 15.1776 13.1451 13.5248C15.2994 11.542 15.1755 8.24217 13.2705 6.37323C11.3554 4.4942 7.93313 4.39621 6.0469 6.82281Z" fill="#FCC11A"/>
<path d="M8.29341 6.20603C7.74007 5.96107 7.13486 6.62824 6.87117 7.08359C6.60747 7.54037 6.3625 8.43522 6.92448 8.66433C7.48646 8.89201 7.88993 8.50583 8.29485 7.83866C8.69688 7.17149 8.92599 6.48702 8.29341 6.20603Z" fill="#FEE269"/>
<path d="M9.73408 3.69863C9.60007 3.94936 9.64474 4.14245 9.91132 4.20585C10.1779 4.26925 11.8365 4.53871 11.9762 4.54736C12.1794 4.56033 12.2543 4.40759 12.2298 4.23035C12.2039 4.05311 11.799 1.57031 11.7615 1.34264C11.7241 1.11496 11.4834 0.887291 11.2543 1.19134C11.0252 1.49538 9.83494 3.50986 9.73408 3.69863ZM14.0282 5.42203C13.7674 5.50272 13.7746 5.66267 13.9143 5.86585C14.0541 6.06903 15.0167 7.53738 15.1046 7.63969C15.1939 7.74055 15.3452 7.76649 15.472 7.61375C15.5988 7.46245 17.181 5.24335 17.2963 5.10502C17.4865 4.87734 17.3727 4.6367 17.0816 4.71163C16.8597 4.77071 14.1924 5.3716 14.0282 5.42203ZM16.0167 9.69163C15.8294 9.585 15.5859 9.61526 15.5225 9.8559C15.4591 10.0965 15.181 11.8444 15.155 11.9972C15.1291 12.1499 15.2444 12.3012 15.4331 12.2638C15.6219 12.2263 18.2358 11.8387 18.4102 11.7955C18.7142 11.7191 18.8151 11.415 18.4995 11.1874C18.2949 11.0389 16.194 9.7925 16.0167 9.69163ZM13.9259 13.833C14.1276 13.7249 14.3063 13.807 14.3567 14.0362C14.4071 14.2638 14.9648 16.5953 15.0541 17.0262C15.0988 17.2423 14.851 17.4196 14.6492 17.2928C14.4461 17.166 12.2443 15.6313 12.103 15.506C11.8999 15.3287 12.0411 15.1443 12.1405 15.0506C12.3422 14.859 13.7357 13.9353 13.9259 13.833ZM7.79453 15.1126C7.53948 15.0881 7.46454 15.3157 7.50345 15.5175C7.54092 15.7207 7.92133 18.2899 7.94727 18.4816C7.98474 18.7597 8.27725 18.8749 8.46602 18.5954C8.65479 18.3159 9.95743 16.2322 10.0626 16.0362C10.2528 15.6818 10.1131 15.6054 9.92284 15.5175C9.73408 15.4296 8.06111 15.1385 7.79453 15.1126ZM4.14743 12.1615C4.32467 11.8704 4.55234 11.9468 4.71805 12.2249C4.83045 12.4151 5.78149 13.6947 5.87083 13.833C5.96017 13.9728 5.99763 14.2379 5.71953 14.3013C5.43854 14.3661 3.17189 14.9613 2.81741 15.0247C2.46293 15.0881 2.25975 14.81 2.48743 14.5059C2.62 14.3272 4.04656 12.3272 4.14743 12.1615ZM3.66614 9.95677C3.99036 10.1009 4.1431 10.049 4.21083 9.817C4.30017 9.51295 4.56531 8.11953 4.57828 7.80252C4.58692 7.59646 4.50191 7.3976 4.18489 7.44804C3.86788 7.49847 1.58826 7.81693 1.29718 7.91779C0.958555 8.03595 0.983052 8.40772 1.20784 8.52588C1.47442 8.66566 3.43703 9.8559 3.66614 9.95677ZM7.60576 4.6367C7.78876 4.49116 7.73257 4.28222 7.56829 4.16838C7.40402 4.05455 5.36937 2.58331 5.11144 2.38158C4.88376 2.20434 4.60421 2.26774 4.68059 2.67266C4.73534 2.96373 5.38378 5.51137 5.42845 5.68717C5.47888 5.89035 5.63163 5.99121 5.80887 5.86441C5.98322 5.73904 7.41555 4.78944 7.60576 4.6367Z" fill="#FFA722"/>
</svg>`

    useEffect(() => {

        localStorage.setItem('theme', theme);
        const getTheme = localStorage.getItem('theme');
        if (getTheme === 'light') {
            setThemeIcon(true)
        }
        else {
            setThemeIcon(false)
        }

        document.querySelector('html').setAttribute('data-theme', getTheme)

        const switchToggleColor = document.querySelector('#switch-toggle');

        if (getTheme === 'light') {
            switchToggleColor.classList.remove('bg-[#263238]', '-translate-x-2')
            switchToggleColor.classList.add('bg-[#FFEBEB]', 'translate-x-full')
            setTimeout(() => {
                switchToggleColor.innerHTML = lightIcon
            }, 250);
        } else {
            switchToggleColor.classList.add('bg-[#263238]', '-translate-x-2')
            switchToggleColor.classList.remove('bg-[#FFEBEB]', 'translate-x-full')
            setTimeout(() => {
                switchToggleColor.innerHTML = darkIcon
            }, 250);
        }

    }, [theme, darkIcon, lightIcon])


    useEffect(() => {
        if (theme === 'dark') {
            document.documentElement.classList.add('dark')
        }
        else {
            document.documentElement.classList.remove('dark')
        }
    }, [theme])
    const handleTheme = () => {
        setTheme(theme === 'dark' ? 'light' : 'dark')
    }
    return (
        <>

            <button
                className="w-20 h-10 z-10 rounded-full bg-white flex items-center transition duration-300 focus:outline-none shadow"
                onClick={handleTheme}
            >
                <div
                    id="switch-toggle"
                    className="w-10 h-10 relative rounded-full transition duration-500 transform bg-[#FFEBEB] -translate-x-2 p-1 text-white">
                </div>
            </button>


        </>
    );
};

export default DarkTheme;